<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç¯ç¯çš„è®°å¿†ç¢ç‰‡åŒ£</title>
  <style>
    :root{
      /* ä½ æˆªå›¾2çš„é…è‰² */
      --pink-strong:#E56D6B;
      --pink-soft:#FA7A77;
      --pink-bg:#FFE5E4;
      --blue-soft:#87E1FF;

      --text:#1b2130;
      --muted:#6f788b;
      --border:rgba(16,24,40,.08);

      --shadow: 0 18px 60px rgba(15, 23, 42, .08);
      --shadow2: 0 10px 26px rgba(15, 23, 42, .06);
      --radius: 24px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}

    body{
      margin:0;
      font-family: ui-rounded, "SF Pro Rounded", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", system-ui, -apple-system, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 520px at 14% 12%, color-mix(in srgb, var(--blue-soft) 65%, white) 0%, transparent 62%),
        radial-gradient(900px 520px at 84% 12%, color-mix(in srgb, var(--pink-soft) 38%, white) 0%, transparent 58%),
        radial-gradient(720px 460px at 52% 96%, color-mix(in srgb, var(--pink-bg) 80%, white) 0%, transparent 60%),
        linear-gradient(180deg, #f9fcff 0%, #f4f8ff 45%, #fff9fa 100%);
      overflow:hidden;
    }

    /* è½»å¾®å™ªç‚¹ */
    body::before{
      content:"";
      position:fixed; inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.08'/%3E%3C/svg%3E");
      mix-blend-mode:soft-light;
      pointer-events:none;
    }

    .wrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      position:relative;
      overflow:hidden;
    }

    /* ===== åˆ†æ•£è‹¹æœ / æ˜Ÿæ˜Ÿçº¿ç¨¿å±‚ï¼ˆä¸æŒ¡å†…å®¹ï¼‰ ===== */
    .decor{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:0;
    }
    .decor svg{
      position:absolute;
      overflow:visible;
      width:auto;
      height:auto;
      stroke: var(--pink-strong);
      fill: none;
      stroke-linecap: round;
      stroke-linejoin: round;
      filter: drop-shadow(0 2px 6px rgba(229,109,107,.04));
    }

    /* è‹¹æœï¼ˆåˆ†æ•£ï¼‰ */
    .decor .apple1{ top:8%;  left:4%;  width:92px;  opacity:.20; transform:rotate(-10deg); }
    .decor .apple2{ top:20%; right:7%; width:78px;  opacity:.18; transform:rotate(8deg); }
    .decor .apple3{ top:56%; left:7%;  width:86px;  opacity:.16; transform:rotate(-6deg); }
    .decor .apple4{ top:76%; right:8%; width:98px;  opacity:.18; transform:rotate(10deg); }

    /* æ˜Ÿæ˜Ÿ / sparkï¼ˆåˆ†æ•£ï¼‰ */
    .decor .spark1{ top:12%; left:16%; width:54px; opacity:.22; transform:rotate(8deg); }
    .decor .spark2{ top:28%; right:18%; width:46px; opacity:.20; transform:rotate(-8deg); }
    .decor .spark3{ top:48%; left:3%;  width:40px; opacity:.16; }
    .decor .spark4{ top:67%; left:18%; width:52px; opacity:.17; transform:rotate(12deg); }
    .decor .spark5{ top:72%; right:4%; width:58px; opacity:.18; transform:rotate(-10deg); }
    .decor .spark6{ top:84%; right:22%; width:44px; opacity:.16; }

    .decor .dot1, .decor .dot2, .decor .dot3, .decor .dot4{
      position:absolute;
      color: var(--pink-strong);
      opacity:.16;
      font-size:16px;
    }
    .decor .dot1{ top:16%; right:28%; }
    .decor .dot2{ top:42%; right:10%; }
    .decor .dot3{ top:63%; left:13%; }
    .decor .dot4{ top:88%; left:28%; }

    /* ä¸»å¡ç‰‡ */
    .shell{
      width:min(940px, 100%);
      height:min(760px, calc(100vh - 48px));
      border-radius: 30px;
      background: rgba(255,255,255,.38);
      border: 1px solid rgba(255,255,255,.72);
      box-shadow: var(--shadow);
      backdrop-filter: blur(16px);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height:0;
      position:relative;
      z-index:2;
    }

    /* é¡¶éƒ¨æ ‡é¢˜åŒº */
    .top{
      padding:22px 24px 18px;
      border-bottom:1px solid rgba(16,24,40,.06);
      background: linear-gradient(180deg, rgba(255,255,255,.62), rgba(255,255,255,.42));
      flex:0 0 auto;
      position:relative;
    }

    .kicker{
      font-size:12px;
      letter-spacing:.16em;
      color:rgba(16,24,40,.45);
      text-transform:uppercase;
      margin-bottom:12px;
    }

    /* ===== CSS ç»¼è‰ºæ„Ÿæ ‡é¢˜ ===== */
    .logo{
      display:flex;
      flex-direction:column;
      gap:4px;
      line-height:0.95;
      width:max-content;
      max-width:100%;
      position:relative;
    }
    .logo-line{
      display:flex;
      align-items:flex-end;
      gap:4px;
      flex-wrap:nowrap;
      width:max-content;
      max-width:100%;
    }
    .logo-line span{
      display:inline-block;
      font-family: "Arial Black", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      font-weight:900;
      letter-spacing:-0.05em;
      color:#121a2f;
      font-size: clamp(28px, 4vw, 52px);
      line-height:0.92;
      position:relative;
      text-shadow:
        0.8px 0.8px 0 rgba(255,255,255,.85),
        -0.8px 0.8px 0 rgba(255,255,255,.7),
        0 2px 0 rgba(18,26,47,.06);
      transform-origin:center bottom;
    }
    .logo-line1 span:nth-child(1){ transform:rotate(-4deg) translateY(1px); }
    .logo-line1 span:nth-child(2){ transform:rotate(2deg) translateY(-1px); }
    .logo-line1 span:nth-child(3){ transform:rotate(-2deg) translateY(1px); }
    .logo-line1 span:nth-child(4){ transform:rotate(3deg) translateY(0px); }
    .logo-line1 span:nth-child(5){ transform:rotate(-3deg) translateY(1px); }

    .logo-line2{ margin-left:8px; }
    .logo-line2 span:nth-child(1){ transform:rotate(2deg) translateY(0px); }
    .logo-line2 span:nth-child(2){ transform:rotate(-3deg) translateY(1px); }
    .logo-line2 span:nth-child(3){ transform:rotate(3deg) translateY(-1px); }

    .logo-line span::before{
      content: attr(data-t);
      position:absolute;
      inset:0;
      color: transparent;
      -webkit-text-stroke: 1px rgba(229,109,107,.28);
      transform: translate(1px, 1px);
      z-index:-1;
      opacity:.8;
    }
    .logo-line span::after{
      content: attr(data-t);
      position:absolute;
      inset:0;
      color: transparent;
      -webkit-text-stroke: 1px rgba(135,225,255,.35);
      transform: translate(-1px, -1px);
      z-index:-2;
      opacity:.7;
    }
    .logo-spark{
      position:absolute;
      right:-18px;
      top:2px;
      color:var(--pink-strong);
      font-size:20px;
      transform:rotate(12deg);
      opacity:.9;
      text-shadow: 0 0 12px rgba(229,109,107,.18);
    }

    .subline{
      margin-top:14px;
      font-size:14px;
      color:rgba(16,24,40,.62);
      line-height:1.6;
      max-width: 68ch;
    }

    /* èŠå¤©åŒº */
    .chat{
      display:flex;
      flex-direction:column;
      padding:14px 16px 16px; /* é¡¶éƒ¨å¾®è°ƒ */
      gap:12px;
      min-height:0;
      flex:1 1 auto;
      background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
    }

    .body{
      flex:1 1 auto;
      min-height:0;
      padding:14px 14px 18px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.62);
      border:1px solid rgba(16,24,40,.06);
      overflow:auto;
      display:flex;
      flex-direction:column;
      gap:10px;
      box-shadow: var(--shadow2);
      -webkit-overflow-scrolling: touch;
    }

    .msg{
      max-width: 84%;
      padding:12px 13px;
      border-radius:18px;
      font-size:14px;
      line-height:1.6;
      white-space:pre-wrap;
      border:1px solid rgba(16,24,40,.07);
      background:rgba(255,255,255,.86);
    }
    .ai{
      align-self:flex-start;
      box-shadow: 0 4px 16px rgba(15,23,42,.04);
    }
    .me{
      align-self:flex-end;
      background:
        linear-gradient(180deg, rgba(135,225,255,.30), rgba(250,122,119,.10));
      border-color: rgba(135,225,255,.34);
    }

    .foot{
      display:flex;
      gap:10px;
      padding:12px;
      border-radius: var(--radius);
      background: rgba(255,255,255,.74);
      border:1px solid rgba(16,24,40,.06);
      box-shadow: var(--shadow2);
      flex:0 0 auto;
      position:relative;
      z-index:10;
    }

    .input{
      flex:1;
      border-radius:16px;
      border:1px solid rgba(16,24,40,.08);
      background: rgba(255,255,255,.92);
      padding:13px 14px;
      font-size:14px;
      outline:none;
      color:var(--text);
    }
    .input::placeholder{ color:#8b93a6; }
    .input:focus{
      border-color: rgba(135,225,255,.65);
      box-shadow: 0 0 0 4px rgba(135,225,255,.18);
    }

    .btn{
      border-radius:16px;
      border:1px solid rgba(16,24,40,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.80));
      padding:12px 16px;
      cursor:pointer;
      transition: transform .08s ease, background .12s ease, box-shadow .12s ease;
      pointer-events:auto;
      font-weight:800;
      color:#1f2a44;
      min-width:74px;
    }
    .btn:hover{
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(15,23,42,.08);
      background: linear-gradient(180deg, rgba(255,255,255,1), rgba(255,255,255,.90));
    }
    .btn:disabled{opacity:.65; cursor:not-allowed;}

    /* æ‰‹æœºç«¯ */
    @media (max-width: 900px){
      body{overflow:auto}
      .wrap{
        align-items:stretch;
        padding:14px;
      }

      .decor .apple1{ width:64px; top:6%; left:2%; opacity:.12; }
      .decor .apple2{ width:58px; top:18%; right:2%; opacity:.12; }
      .decor .apple3{ width:60px; top:66%; left:2%; opacity:.10; }
      .decor .apple4{ width:68px; top:84%; right:2%; opacity:.12; }

      .decor .spark1,.decor .spark2,.decor .spark3,.decor .spark4,.decor .spark5,.decor .spark6{
        opacity:.10;
        width:36px !important;
      }
      .decor .dot1,.decor .dot2,.decor .dot3,.decor .dot4{
        opacity:.08;
      }

      .shell{
        height:auto;
        min-height: calc(100vh - 28px);
        border-radius:24px;
      }
      .logo-line span{
        font-size: clamp(24px, 8vw, 38px);
      }
      .logo-line2{ margin-left:4px; }
      .logo-spark{ right:-10px; top:-2px; font-size:16px; }
      .chat{
        min-height: 520px;
        padding:12px;
      }
      .top{
        padding:18px 18px 14px;
      }
      .subline{ font-size:13px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <!-- åˆ†æ•£çº¿ç¨¿è£…é¥°å±‚ -->
    <div class="decor" aria-hidden="true">
      <!-- è‹¹æœçº¿ç¨¿ x4 -->
      <svg class="apple1" viewBox="0 0 120 120">
        <g stroke-width="2.4">
          <path d="M49 28 C41 20, 31 24, 28 34 C18 40, 16 56, 24 64 C29 84, 45 96, 64 95 C83 94, 98 83, 103 65 C111 57, 110 42, 100 35 C91 23, 76 22, 67 30 C58 22, 53 24, 49 28 Z"/>
          <path d="M66 29 C67 18, 74 11, 82 11"/>
          <path d="M68 27 C74 21, 80 23, 85 27"/>
          <path d="M38 57 C30 58, 24 55, 19 51"/>
          <path d="M100 57 C109 57, 115 53, 119 49"/>
        </g>
      </svg>

      <svg class="apple2" viewBox="0 0 120 120">
        <g stroke-width="2.2">
          <path d="M49 28 C41 20, 31 24, 28 34 C18 40, 16 56, 24 64 C29 84, 45 96, 64 95 C83 94, 98 83, 103 65 C111 57, 110 42, 100 35 C91 23, 76 22, 67 30 C58 22, 53 24, 49 28 Z"/>
          <path d="M66 29 C67 18, 74 11, 82 11"/>
          <path d="M68 27 C74 21, 80 23, 85 27"/>
        </g>
      </svg>

      <svg class="apple3" viewBox="0 0 120 120">
        <g stroke-width="2.3">
          <path d="M49 28 C41 20, 31 24, 28 34 C18 40, 16 56, 24 64 C29 84, 45 96, 64 95 C83 94, 98 83, 103 65 C111 57, 110 42, 100 35 C91 23, 76 22, 67 30 C58 22, 53 24, 49 28 Z"/>
          <path d="M66 29 C67 18, 74 11, 82 11"/>
          <path d="M68 27 C74 21, 80 23, 85 27"/>
          <circle cx="84" cy="38" r="3.2"/>
        </g>
      </svg>

      <svg class="apple4" viewBox="0 0 120 120">
        <g stroke-width="2.4">
          <path d="M49 28 C41 20, 31 24, 28 34 C18 40, 16 56, 24 64 C29 84, 45 96, 64 95 C83 94, 98 83, 103 65 C111 57, 110 42, 100 35 C91 23, 76 22, 67 30 C58 22, 53 24, 49 28 Z"/>
          <path d="M66 29 C67 18, 74 11, 82 11"/>
          <path d="M68 27 C74 21, 80 23, 85 27"/>
          <path d="M36 78 C43 85, 53 89, 64 89"/>
        </g>
      </svg>

      <!-- æ˜Ÿæ˜Ÿ / spark çº¿ç¨¿ x6 -->
      <svg class="spark1" viewBox="0 0 60 60">
        <g stroke-width="2.2">
          <path d="M30 8 L34 24 L50 28 L34 32 L30 48 L26 32 L10 28 L26 24 Z"/>
          <path d="M8 10 l4 0 M10 8 l0 4 M46 12 l4 0 M48 10 l0 4 M12 46 l4 0 M14 44 l0 4"/>
        </g>
      </svg>

      <svg class="spark2" viewBox="0 0 60 60">
        <g stroke-width="2.2">
          <path d="M30 10 L33 22 L46 25 L33 28 L30 40 L27 28 L14 25 L27 22 Z"/>
          <circle cx="14" cy="14" r="1.8"/><circle cx="46" cy="14" r="1.8"/><circle cx="46" cy="40" r="1.8"/>
        </g>
      </svg>

      <svg class="spark3" viewBox="0 0 60 60">
        <g stroke-width="2">
          <path d="M30 14 L32 24 L42 26 L32 28 L30 38 L28 28 L18 26 L28 24 Z"/>
          <path d="M8 30 l8 0 M44 30 l8 0 M30 8 l0 8 M30 44 l0 8"/>
        </g>
      </svg>

      <svg class="spark4" viewBox="0 0 60 60">
        <g stroke-width="2.1">
          <path d="M30 9 L34 23 L48 27 L34 31 L30 45 L26 31 L12 27 L26 23 Z"/>
          <path d="M12 10 l4 0 M14 8 l0 4 M46 46 l4 0 M48 44 l0 4"/>
        </g>
      </svg>

      <svg class="spark5" viewBox="0 0 60 60">
        <g stroke-width="2.2">
          <path d="M30 8 L35 24 L52 29 L35 34 L30 50 L25 34 L8 29 L25 24 Z"/>
          <circle cx="12" cy="14" r="1.5"/><circle cx="48" cy="14" r="1.5"/><circle cx="16" cy="46" r="1.5"/>
        </g>
      </svg>

      <svg class="spark6" viewBox="0 0 60 60">
        <g stroke-width="2">
          <path d="M30 12 L33 22 L43 25 L33 28 L30 38 L27 28 L17 25 L27 22 Z"/>
          <path d="M10 25 l4 0 M12 23 l0 4 M44 34 l4 0 M46 32 l0 4"/>
        </g>
      </svg>

      <!-- å°ç‚¹ç‚¹ -->
      <div class="dot1">âœ¦</div>
      <div class="dot2">âœ§</div>
      <div class="dot3">âœ¦</div>
      <div class="dot4">âœ§</div>
    </div>

    <div class="shell">
      <!-- é¡¶éƒ¨æ ‡é¢˜åŒºï¼ˆå•æ ï¼‰ -->
      <section class="top">
        <div class="kicker">MEMORY FRAGMENTS</div>

        <div class="logo" aria-label="ç¯ç¯çš„è®°å¿†ç¢ç‰‡åŒ£">
          <div class="logo-line logo-line1">
            <span data-t="ç¯">ç¯</span>
            <span data-t="ç¯">ç¯</span>
            <span data-t="çš„">çš„</span>
            <span data-t="è®°">è®°</span>
            <span data-t="å¿†">å¿†</span>
          </div>
          <div class="logo-line logo-line2">
            <span data-t="ç¢">ç¢</span>
            <span data-t="ç‰‡">ç‰‡</span>
            <span data-t="åŒ£">åŒ£</span>
          </div>
          <div class="logo-spark">âœ¦</div>
        </div>

        <div class="subline">åƒç¿»ä¸€æœ¬è½»è½»çš„å°å†Œå­ä¸€æ ·ï¼Œé—®é—®çœ‹ç¯ç¯çš„å…´è¶£ã€å­¦ä¹ ç»å†ã€ç”Ÿæ´»ç¢ç‰‡ï¼Œæˆ–è€…ä½ æœ€å¥½å¥‡çš„çº½çº¦æ—¥å¸¸å§ âœ¨</div>
      </section>

      <!-- èŠå¤©åŒºï¼ˆå·²å»æ‰é¡¶éƒ¨â€œå¯¹è¯/chatInputâ€æ¡ï¼‰ -->
      <section class="chat">
        <div class="body" id="body"></div>

        <div class="foot">
          <input class="input" id="input" placeholder="é—®æˆ‘ç‚¹ä»€ä¹ˆâ€¦ï¼ˆæ¯”å¦‚ï¼šå¥¹åœ¨ç¾å›½å»è¿‡å“ªäº›åœ°æ–¹æ—…è¡Œï¼Ÿï¼‰" />
          <button class="btn" id="send">å‘é€</button>
        </div>
      </section>
    </div>
  </div>

  <script>
    // âœ… æ”¹è¿™é‡Œï¼šä½ çš„ n8n Chat URLï¼ˆå¿…é¡»ä»¥ /chat ç»“å°¾ï¼‰
    const WEBHOOK_URL = "https://sl11565-n8n-free.hf.space/webhook/c3147549-60be-453e-9fbd-418219cfea28/chat";

    const body = document.getElementById('body');
    const input = document.getElementById('input');
    const send = document.getElementById('send');

    // ä¼šè¯ idï¼ˆå¯ä¿ç•™ä¸Šä¸‹æ–‡ï¼‰
    const sessionId = localStorage.getItem('mm_session') || (crypto.randomUUID?.() || String(Date.now()));
    localStorage.setItem('mm_session', sessionId);

    let isSending = false;

    function add(text, cls){
      const d = document.createElement('div');
      d.className = `msg ${cls}`;
      d.textContent = text;
      body.appendChild(d);
      d.scrollIntoView({ block: "end", behavior: "smooth" });
      return d;
    }

    // å¼€åœºè¯­ï¼ˆæ”¾åœ¨å¯¹è¯æ¡†é‡Œï¼‰
    add(
`Hiiiï½æˆ‘æ˜¯ç¯ç¯çš„è®°å¿†ç¢ç‰‡åŒ£ ğŸâœ¨
åœ¨è¿™é‡Œä½ å¯ä»¥å¯¹ç¯ç¯æœ‰æ›´å¤šäº†è§£ï¼ˆçˆ±å¥½ã€å­¦ä¹ ç»å†ã€ç”Ÿæ´»ç»å†ã€çº½çº¦æ—¥å¸¸ç­‰ç­‰ï¼‰ï½
å¦‚æœä½ å¯¹å¥¹çš„çº½çº¦ç”Ÿæ´»æ„Ÿåˆ°å¥½å¥‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥é—®æˆ‘å…·ä½“ä¸€ç‚¹çš„é—®é¢˜å‘€ï½`,
      "ai"
    );

    add(
`å°æç¤ºğŸ“®ï¼šå¦‚æœæˆ‘æ²¡ç¿»åˆ°ç›¸å…³ç¢ç‰‡ï¼Œä¸ä¸€å®šæ˜¯ä½ é—®å¾—ä¸å¥½ï¼Œå¯èƒ½æ˜¯ç¯ç¯è¿˜æ²¡æ›´æ–°åˆ°è¿™ä¸€é¡µå˜¿å˜¿ï½
ä½ å¯ä»¥æ¢ä¸ªæ›´å…·ä½“çš„é—®æ³•ï¼ˆåœ°ç‚¹ / æ—¶é—´ / äº‹ä»¶å…³é”®è¯ï¼‰ï¼Œæˆ‘ä¼šæ›´å®¹æ˜“ç¿»å‡ºæ¥ï¼`,
      "ai"
    );

    async function sendMsg(q){
      const msg = (q ?? input.value).trim();
      if(!msg || isSending) return;

      isSending = true;
      send.disabled = true;
      input.disabled = true;

      add(msg, "me");
      input.value = "";

      const thinking = add("ï¼ˆæˆ‘ç¿»ç¿»ç¢ç‰‡â€¦ï¼‰", "ai");

      try{
        const form = new URLSearchParams();
        form.set("chatInput", msg);
        form.set("sessionId", sessionId);

        const res = await fetch(WEBHOOK_URL, {
          method: "POST",
          body: form,
        });

        if (!res.ok) {
          thinking.textContent = `æˆ‘è¿™è¾¹æ²¡è¿ä¸Šï¼ˆHTTP ${res.status}ï¼‰ğŸ˜µâ€ğŸ’« ä½ å†è¯•ä¸€æ¬¡ï¼Ÿ`;
          return;
        }

        const data = await res.json().catch(()=> ({}));
        const out = data.output || data.reply || data.text || data.message || "";

        thinking.textContent = out || "æˆ‘è¿™æ®µæš‚æ—¶æ²¡ç¿»åˆ°å¯¹åº”ç¢ç‰‡ğŸ™‚ ä½ èƒ½æŠŠé—®é¢˜é—®å¾—æ›´å…·ä½“ä¸€ç‚¹å—ï¼Ÿ";
        thinking.scrollIntoView({ block: "end", behavior: "smooth" });

      } catch(e){
        thinking.textContent = "æˆ‘è¿™è¾¹åˆšåˆšå¡äº†ä¸€ä¸‹ğŸ˜µâ€ğŸ’« ä½ å†è¯•ä¸€æ¬¡ï¼Ÿ";
      } finally {
        isSending = false;
        send.disabled = false;
        input.disabled = false;
        input.focus();
      }
    }

    send.addEventListener('click', ()=>sendMsg());
    input.addEventListener('keydown', (e)=>{ if(e.key === 'Enter') sendMsg(); });
  </script>
</body>
</html>
